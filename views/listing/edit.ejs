<% layout("/layouts/other_boilerplate") %>

<div class="container py-3">
  <h2 class="mb-3">Edit Profile</h2>

  <form action="/listing/<%= user.id %>?_method=PUT" method="POST">
    <div class="row g-0">

      <!-- Basic Info -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Basic Information</h6>
          <label class="form-label">Full Name:</label>
          <input type="text" class="form-control mb-2" name="full_name" value="<%= user.full_name %>" required>

          <label class="form-label">Email:</label>
          <input type="email" class="form-control mb-2" name="email" value="<%= user.email %>" required>

          <label class="form-label">Phone:</label>
          <input type="tel" class="form-control mb-2" name="phone" value="<%= user.phone %>" required>

          <label class="form-label">Hourly Rate:</label>
          <input type="number" class="form-control" name="hourly_rate" value="<%= user.hourly_rate %>">
        </div>
      </div>

      <!-- Location -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Location</h6>
          <label class="form-label">City:</label>
          <input type="text" class="form-control mb-2" name="location[city]" value="<%= user.location.city %>">

          <label class="form-label">State:</label>
          <input type="text" class="form-control mb-2" name="location[state]" value="<%= user.location.state %>">

          <label class="form-label">Pincode:</label>
          <input type="text" class="form-control" name="location[pincode]" value="<%= user.location.pincode %>">
        </div>
      </div>

      <!-- Skills -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Skills</h6>
          <% user.skill_category.forEach(function(skill) { %>
            <input type="text" class="form-control mb-2" name="skill_category[]" value="<%= skill %>">
          <% }) %>
        </div>
      </div>

      <!-- Availability -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Availability</h6>
          <label class="form-label">Status:</label>
          <input type="text" class="form-control mb-2" name="availability[status]" value="<%= user.availability.status %>">

          <label class="form-label">Working Days:</label>
          <% user.availability.working_hours[0].day.forEach(function(day) { %>
            <input type="text" class="form-control mb-1" name="availability[working_hours][0][day][]" value="<%= day %>">
          <% }) %>

          <label class="form-label">Start Time:</label>
          <input type="time" class="form-control mb-2" name="availability[working_hours][0][start_time]" value="<%= user.availability.working_hours[0].start_time %>">

          <label class="form-label">End Time:</label>
          <input type="time" class="form-control" name="availability[working_hours][0][end_time]" value="<%= user.availability.working_hours[0].end_time %>">
        </div>
      </div>

      <!-- Experience and About -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Experience & About</h6>
          <label class="form-label">Experience (Years):</label>
          <input type="number" class="form-control mb-2" name="experience_years" value="<%= user.experience_years %>">

          <label class="form-label">About:</label>
          <textarea class="form-control" name="about" rows="3"><%= user.about %></textarea>
        </div>
      </div>

      <!-- Languages -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Languages</h6>
          <% user.languages.forEach(function(lang) { %>
            <input type="text" class="form-control mb-2" name="languages[]" value="<%= lang %>">
          <% }) %>
        </div>
      </div>

      <!-- Profile Info -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Profile Info</h6>
          <label class="form-label">Profile Picture URL:</label>
          <input type="text" class="form-control mb-2" name="profile_picture_url" value="<%= user.profile_picture_url %>">

          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="is_verified" <%= user.is_verified ? 'checked' : '' %>>
            <label class="form-check-label">Verified</label>
          </div>
        </div>
      </div>

      <!-- Documents -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Documents</h6>
          <% user.documents.forEach(function(doc, i) { %>
            <input type="text" class="form-control mb-2" name="documents[<%= i %>][doc_type]" value="<%= doc.doc_type %>" placeholder="Type">
            <input type="text" class="form-control mb-2" name="documents[<%= i %>][doc_url]" value="<%= doc.doc_url %>" placeholder="URL">
          <% }) %>
        </div>
      </div>

      <!-- Rating -->
      <div class="col-md-6">
        <div class="card p-3 mb-0 h-100">
          <h6>Rating</h6>
          <label class="form-label">Average:</label>
          <input type="number" step="0.1" class="form-control mb-2" name="rating[average]" value="<%= user.rating.average %>">

          <label class="form-label">Total Reviews:</label>
          <input type="number" class="form-control" name="rating[total_reviews]" value="<%= user.rating.total_reviews %>">
        </div>
      </div>

      <!-- Submit -->
      <div class="col-12 mt-2">
        <button type="submit" class="btn btn-primary w-100">Update Profile</button>
      </div>

    </div>
  </form>
</div>
